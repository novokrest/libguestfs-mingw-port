# Makifile for libguestfs-mingw-port: main

top_srcdir = .
gnulib_dir = $(top_srcdir)/gnulib/lib
osdep_dir = $(top_srcdir)/osdep
generator_dir = $(top_srcdir)/generator
daemon_dir = $(top_srcdir)/daemon
ivshmem_dir = $(top_srcdir)/ivshmem
appliance_dir = $(top_srcdir)/appliance

MAKEFILE_NAME = MakefileLinux

all: gnulib osdep generator daemon appliance ivshmem

gnulib:
	$(MAKE) -f $(MAKEFILE_NAME) -C $(gnulib_dir)

osdep:
	$(MAKE) -f $(MAKEFILE_NAME) -C $(osdep_dir)

generator:
	$(MAKE) -f $(MAKEFILE_NAME) -C $(generator_dir)

daemon: generator
	$(MAKE) -f $(MAKEFILE_NAME) -C $(daemon_dir)

ivshmem:
	$(MAKE) -f $(MAKEFILE_NAME) -C $(ivshmem_dir)

appliance: daemon ivshmem
	$(MAKE) -f $(MAKEFILE_NAME) -C $(appliance_dir)

clean:
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(gnulib_dir)
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(osdep_dir) 
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(generator_dir)
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(daemon_dir)
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(ivshmem_dir)
	$(MAKE) clean -f $(MAKEFILE_NAME) -C $(appliance_dir)

.PHONY: all clean gnulib osdep generator daemon ivshmem appliance

